{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/PersonService.js","components/Notification.js","App.js","index.js"],"names":["Filter","filterHandler","onChange","PersonForm","props","onSubmit","addPerson","handleNameChange","value","name","handleNumberChange","number","type","Persons","persons","deleteHandler","map","person","onClick","id","baseUrl","axios","get","then","res","data","newPerson","post","delete","put","Notification","notification","message","isError","style","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","filter","setFilter","setNotigication","useEffect","personService","personsToShow","length","toLowerCase","includes","showNotification","setTimeout","e","target","preventDefault","existsPerson","find","toLocaleLowerCase","window","confirm","returnedPerson","catch","err","response","error","personToDelete","filterPerson","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.bdd75bc6.chunk.js","sourcesContent":["const Filter = ({ filterHandler }) => {\r\n  return (\r\n    <div>\r\n      filter shown with <input onChange={filterHandler} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","const PersonForm = (props) => {\r\n  return (\r\n    <form onSubmit={props.addPerson}>\r\n      <div>\r\n        name: <input onChange={props.handleNameChange} value={props.name} />\r\n      </div>\r\n      <div>\r\n        number:{\" \"}\r\n        <input onChange={props.handleNumberChange} value={props.number} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","const Persons = ({ persons, deleteHandler }) => {\r\n  return (\r\n    <div>\r\n      {persons.map((person) => (\r\n        <p key={person.id}>\r\n          {person.name} {person.number} <button onClick={() => deleteHandler(person)}>delete</button>\r\n        </p>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Persons;\r\n","import axios from \"axios\";\r\n\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getAll = () => {\r\n  return axios.get(baseUrl).then((res) => res.data);\r\n};\r\n\r\nconst create = (newPerson) => {\r\n  return axios.post(baseUrl, newPerson).then((res) => res.data);\r\n};\r\n\r\nconst update = (id, person) => {\r\n  return axios.put(baseUrl + `/${id}`, person).then((res) => res.data);\r\n};\r\n\r\nconst deletePerson = (id) => {\r\n  return axios.delete(baseUrl + `/${id}`).then((res) => res.data);\r\n};\r\n\r\n// eslint-disable-next-line\r\nexport default { getAll, create, deletePerson, update };\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ notification }) => {\r\n  const { message, isError } = notification || { message: null, isError: null };\r\n\r\n  const style = {\r\n    color: isError ? \"red\" : \"green\",\r\n    background: \"lightgrey\",\r\n    fontSize: 20,\r\n    borderStyle: \"solid\",\r\n    borderRadius: 5,\r\n    padding: 10,\r\n    marginBottom: 10,\r\n  };\r\n\r\n  if (message === null) {\r\n    return null;\r\n  }\r\n\r\n  return <div style={style}>{message}</div>;\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useEffect, useState } from \"react\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport personService from \"./services/PersonService\";\nimport Notification from \"./components/Notification\";\n\nconst App = () => {\n  // Persons with dummy data\n  const [persons, setPersons] = useState([]);\n\n  // States\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filter, setFilter] = useState(\"\");\n  const [notification, setNotigication] = useState({\n    message: null,\n    isError: null,\n  });\n\n  useEffect(() => {\n    personService.getAll().then((persons) => setPersons(persons));\n  }, []);\n\n  const personsToShow =\n    filter.length > 0\n      ? persons.filter((person) => person.name.toLowerCase().includes(filter))\n      : persons;\n\n  // Handlers\n  const handleNameChange = (e) => setNewName(e.target.value);\n  const handleNumberChange = (e) => setNewNumber(e.target.value);\n\n  const addPerson = (e) => {\n    e.preventDefault();\n    const existsPerson = persons.find(\n      (person) => person.name.toLocaleLowerCase() === newName.toLowerCase()\n    );\n    if (existsPerson) {\n      const message = `${newName} is already added to phonebook, replace the old number with a new one?`;\n      if (!window.confirm(message)) return;\n      personService\n        .update(existsPerson.id, {\n          ...existsPerson,\n          number: newNumber,\n        })\n        .then((returnedPerson) => {\n          setPersons(\n            persons.map((person) =>\n              returnedPerson.id === person.id ? returnedPerson : person\n            )\n          );\n          showNotification(`${existsPerson.name} updated`, false);\n        })\n        .catch((err) => {\n          showNotification(\n            err.response.data.error,\n            true\n          );\n          setPersons(persons.filter((person) => person.id !== existsPerson.id));\n        });\n    } else {\n      const newPerson = {\n        name: newName,\n        number: newNumber,\n      };\n      personService\n        .create(newPerson)\n        .then((newPerson) => {\n          setPersons([...persons, newPerson]);\n          showNotification(`Added ${newPerson.name}`, false);\n        })\n        .catch((err) =>\n          showNotification(err.response.data.error, true)\n        );\n    }\n    setNewName(\"\");\n    setNewNumber(\"\");\n  };\n\n  const filterHandler = (e) => {\n    setFilter(e.target.value.toLowerCase());\n  };\n\n  const deleteHandler = (personToDelete) => {\n    if (!window.confirm(`Delete ${personToDelete.name}?`)) return;\n    personService\n      .deletePerson(personToDelete.id)\n      .then(() => {\n        setPersons(\n          persons.filter(\n            (filterPerson) => personToDelete.id !== filterPerson.id\n          )\n        );\n        showNotification(`Deleted ${personToDelete.name}`, false);\n      })\n      .catch((err) =>\n        showNotification(\n          `Error: ${personToDelete.name} hasn't beend deleted.`,\n          true\n        )\n      );\n  };\n\n  // Helper\n  const showNotification = (message, isError) => {\n    setNotigication({ message, isError });\n    setTimeout(() => setNotigication(null), 4000);\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n\n      <Notification notification={notification} />\n\n      <Filter filterHandler={filterHandler} />\n\n      <h3>Add a new</h3>\n\n      <PersonForm\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n        addPerson={addPerson}\n        name={newName}\n        number={newNumber}\n      />\n\n      <h3>Numbers</h3>\n\n      <Persons persons={personsToShow} deleteHandler={deleteHandler} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}
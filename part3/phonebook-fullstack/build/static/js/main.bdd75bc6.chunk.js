(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{44:function(e,n,t){"use strict";t.r(n);var r=t(2),c=t(19),a=t.n(c),o=t(20),i=t(10),u=t(3),d=t(0),s=function(e){var n=e.filterHandler;return Object(d.jsxs)("div",{children:["filter shown with ",Object(d.jsx)("input",{onChange:n})]})},l=function(e){return Object(d.jsxs)("form",{onSubmit:e.addPerson,children:[Object(d.jsxs)("div",{children:["name: ",Object(d.jsx)("input",{onChange:e.handleNameChange,value:e.name})]}),Object(d.jsxs)("div",{children:["number:"," ",Object(d.jsx)("input",{onChange:e.handleNumberChange,value:e.number})]}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{type:"submit",children:"add"})})]})},b=function(e){var n=e.persons,t=e.deleteHandler;return Object(d.jsx)("div",{children:n.map((function(e){return Object(d.jsxs)("p",{children:[e.name," ",e.number," ",Object(d.jsx)("button",{onClick:function(){return t(e)},children:"delete"})]},e.id)}))})},j=t(5),f=t.n(j),h="/api/persons",m=function(){return f.a.get(h).then((function(e){return e.data}))},O=function(e){return f.a.post(h,e).then((function(e){return e.data}))},p=function(e){return f.a.delete(h+"/".concat(e)).then((function(e){return e.data}))},g=function(e,n){return f.a.put(h+"/".concat(e),n).then((function(e){return e.data}))},x=function(e){var n=e.notification||{message:null,isError:null},t=n.message,r={color:n.isError?"red":"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};return null===t?null:Object(d.jsx)("div",{style:r,children:t})},v=function(){var e=Object(r.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],a=Object(r.useState)(""),j=Object(u.a)(a,2),f=j[0],h=j[1],v=Object(r.useState)(""),w=Object(u.a)(v,2),C=w[0],k=w[1],S=Object(r.useState)(""),E=Object(u.a)(S,2),y=E[0],L=E[1],N=Object(r.useState)({message:null,isError:null}),H=Object(u.a)(N,2),D=H[0],P=H[1];Object(r.useEffect)((function(){m().then((function(e){return c(e)}))}),[]);var A=y.length>0?t.filter((function(e){return e.name.toLowerCase().includes(y)})):t,B=function(e,n){P({message:e,isError:n}),setTimeout((function(){return P(null)}),4e3)};return Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Phonebook"}),Object(d.jsx)(x,{notification:D}),Object(d.jsx)(s,{filterHandler:function(e){L(e.target.value.toLowerCase())}}),Object(d.jsx)("h3",{children:"Add a new"}),Object(d.jsx)(l,{handleNameChange:function(e){return h(e.target.value)},handleNumberChange:function(e){return k(e.target.value)},addPerson:function(e){e.preventDefault();var n=t.find((function(e){return e.name.toLocaleLowerCase()===f.toLowerCase()}));if(n){var r="".concat(f," is already added to phonebook, replace the old number with a new one?");if(!window.confirm(r))return;g(n.id,Object(i.a)(Object(i.a)({},n),{},{number:C})).then((function(e){c(t.map((function(n){return e.id===n.id?e:n}))),B("".concat(n.name," updated"),!1)})).catch((function(e){B(e.response.data.error,!0),c(t.filter((function(e){return e.id!==n.id})))}))}else{O({name:f,number:C}).then((function(e){c([].concat(Object(o.a)(t),[e])),B("Added ".concat(e.name),!1)})).catch((function(e){return B(e.response.data.error,!0)}))}h(""),k("")},name:f,number:C}),Object(d.jsx)("h3",{children:"Numbers"}),Object(d.jsx)(b,{persons:A,deleteHandler:function(e){window.confirm("Delete ".concat(e.name,"?"))&&p(e.id).then((function(){c(t.filter((function(n){return e.id!==n.id}))),B("Deleted ".concat(e.name),!1)})).catch((function(n){return B("Error: ".concat(e.name," hasn't beend deleted."),!0)}))}})]})};a.a.render(Object(d.jsx)(v,{}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.bdd75bc6.chunk.js.map